<link rel="stylesheet" href="/css/user_profile.css">
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<div class="container">
    <div class="user-details profile-sections">
        <div>
            <img src="https://images.fanfight.com/avatars/avatar20.png" alt="User Avatar" id="user-image">
        </div>

        <div class="user-name-hello">
            <p>Hello,</p>
            <p id="user-name"><%= userId %></p>
        </div>
    </div>

    <div class="user-wallet profile-sections">
        <div id="wallet-icon-name" class="logo-name">
            <i class="fas fa-wallet"></i>
            <p>
                My Balance
            </p>
        </div>
        <div id="wallet-details">
            <p ><i class="fas fa-wallet fa-5x" id="wallet-logo"></i></p>
            <p id="my-balance-title">MY BALANCE</p>
            <p id="wallet-balance" data-wallet-balance = "<%= wallet %>">₹ <%= wallet %></p>
            <button id="add-money-button">
                Add Cash
            </button>
            <button id="withdraw-money-button">
                Withdraw Cash
            </button>
        </div>

        <div id="enter-add-amount-div">
            <p>
                Enter Amount
            </p>
            <div id="rupee-amount-input">
                <div id="rupee-icon">
                    ₹
                </div>
                <input type="tel" name="amount" maxlength="8" placeholder="Enter amount (₹20 to ₹100000)" id="enter-add-amount-input" value="" required>
            </div>
            <button id="add-cash-button">
                ADD CASH
            </button>
        </div>

        <div id="enter-withdraw-amount-div">
            <p>
                Enter Amount
            </p>
            <div id="rupee-amount-input">
                <div id="rupee-icon">
                    ₹
                </div>
                <input type="tel" name="amount" maxlength="8" placeholder="Enter amount (₹20 to ₹100000)" id="enter-withdraw-amount-input" value="" required>
            </div>
            <button id="withdraw-cash-button">
                WITHDRAW CASH
            </button>
        </div>
    </div>
    <div class="my-stats profile-sections">
        <div id="stat-icon-name" class="logo-name">
            <i class="fas fa-chart-bar" ></i>
            <p>
                My Stats
            </p>
        </div>
        <div id="contest-details">
            <div id="winning-amount">
                <p>Total Winnings</p>
                <p>₹ <%= totalAmountWon %> </p>
            </div>
            <div id="general-stats">
                <div>
                    <p>Contest Joined </p>
                    <p class="general-stats-value">
                        <%= numberOfContestJoined %>
                    </p>
                </div>

                <div>
                    <p>Team Created</p>
                    <p class="general-stats-value">
                        <%= numberOfTeamsCreated  %>
                    </p>
                </div>

                <div>
                    <p>Total Wins</p>
                    <p class="general-stats-value">
                        <%= numberOfContestWon %>
                    </p>
                </div>
            </div>
        </div>

    </div>

    <div class="my-transaction profile-sections">
        <div class="logo-name">
            <i class="fas fa-money-bill"></i>
            <p>
                My Transaction
            </p>
        </div>
    </div>

    <div class="refer-earn profile-sections">
        <div class="logo-name" id="refer-div">
            <i class="fas fa-gift"></i>
            <p>Refer & Earn</p>
        </div>
        <div id="referAndEarn">
            <p class="get-upto">GET UPTO</p>
            <p class="refer-earn-price">₹ 100</p>
            <p class="referral-msg">on every referral</p>
            <fieldset>
                <legend>Your Code</legend>
                <% let referCode = Buffer.from(userIdDB).toString('base64'); %>
                <p id="refer-code">  <%= referCode  %> </p>
                <i class="far fa-copy" id="refer-code-copy" data-refer-code="<%= referCode %>"></i></p>
            </fieldset>
        </div>
    </div>

    <div class="bank-accounts profile-sections">
        <div class="logo-name" id="bank-account-div">
            <i class="fas fa-university"></i>
            <p>Bank Account</p>
        </div>

        <% if(!accountNumber) {%>
            <div id="enter-account-div">
                <p>
                    Enter Account Details
                </p>
                <form action="/users/profile/addAccount" method="POST">
                    <div id="ifsc-account-div">
                        <input type="text" name="ifsc" placeholder="Enter IFSC" id="enter-ifsc-code" value="">
                        <br>
                        <input type="text" name="accountNumber" placeholder="Enter Account Number" id="enter-account-number" value="">
                    </div>
                    <button id="add-account-button" type="submit">
                        ADD ACCOUNT
                    </button>
                </form>
            </div>
        <% }else{ %>
            <div id="enter-account-div">
                <p>
                    Account Details
                </p>
                <div id="ifsc-account-div">
                    <input type="text" name="ifsc" placeholder="Enter IFSC" id="enter-ifsc-code" value="<%= ifsc %>" readonly>
                    <br>
                    <input type="text" name="accountNumber" placeholder="Enter Account Number" id="enter-account-number" value="<%= accountNumber %>" readonly>
                </div>
            </div>
        <% } %>
    </div>
</div>

<script src="/js/user_profile.js"></script>
